package com.emailsender.service;import jakarta.mail.MessagingException;import jakarta.mail.internet.MimeMessage;import model.EmailRequest;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.core.io.FileSystemResource;import org.springframework.mail.javamail.JavaMailSender;import org.springframework.mail.javamail.MimeMessageHelper;import org.springframework.stereotype.Service;import java.io.File;@Servicepublic class EmailService {    @Autowired    private JavaMailSender mailSender;    public void sendHtmlMailWithAttachment(EmailRequest request) throws MessagingException {        MimeMessage mimeMessage = mailSender.createMimeMessage();        // true = multipart (for attachments), UTF-8 ensures proper encoding        MimeMessageHelper helper = new MimeMessageHelper(mimeMessage, true, "UTF-8");        helper.setFrom("meherharshal924@gmail.com");        helper.setTo(request.getTo());        helper.setSubject(request.getSubject());        // âœ… Beautiful HTML message        String htmlMsg = "<!DOCTYPE html>" +                "<html>" +                "<head>" +                " <style>" +                "   body { font-family: Arial, sans-serif; background:#f9f9f9; padding:20px; }" +                "   .card { background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.2); padding:20px; }" +                "   h2 { color:#2c3e50; }" +                "   p { color:#34495e; font-size:14px; }" +                "   .footer { margin-top:20px; font-size:12px; color:#888; }" +                " </style>" +                "</head>" +                "<body>" +                " <div class='card'>" +                "   <h2>ðŸ“© " + request.getSubject() + "</h2>" +                "   <p>" + request.getBody() + "</p>" +                "   <p class='footer'>This is an automated mail from Spring Boot.</p>" +                " </div>" +                "</body>" +                "</html>";        // true = treat content as HTML        helper.setText(htmlMsg, true);        // âœ… Add attachment if provided        if (request.getAttachmentPath() != null && !request.getAttachmentPath().isEmpty()) {            FileSystemResource file = new FileSystemResource(new File(request.getAttachmentPath()));            helper.addAttachment(file.getFilename(), file);        }        mailSender.send(mimeMessage);        System.out.println("HTML Mail with attachment sent successfully...");    }}